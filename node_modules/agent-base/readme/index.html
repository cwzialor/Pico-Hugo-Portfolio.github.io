<!DOCTYPE html>
<html lang="en-GB">
<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title> | My New Hugo Site</title>

	<link rel="stylesheet" href="css/pico.min.css" type="text/css" media="all" />
	<link rel="stylesheet" href="css/style.css" type="text/css" media="all" />
	<link rel="stylesheet" href="../css/pico.min.css" type="text/css" media="all" />
	<link rel="stylesheet" href="../css/style.css" type="text/css" media="all" />
	<link rel="stylesheet" href="../../css/pico.min.css" type="text/css" media="all" />
	<link rel="stylesheet" href="../../css/style.css" type="text/css" media="all" />

	</head>

<body>
	<nav>
		<ul>
		  <li>
			<a href="http://localhost:1313/">
				<strong>
					My New Hugo Site
				</strong>
			</a>
		</li>
		</ul>
		<ul>
		  <a href="#"> 
			<header class="site-header">
  <nav class="site-nav">
    <ul class="main-menu">
  
        
      <li>
        <a href="/posts"> Posts </a>
      </li>
      
      <li>
        <a href="/about"> About </a>
      </li>
      
      <li>
        <a href="mailto:caspar.zialor@sjtu.edu.cn">Email</a>
      </li>
    </ul>
  </nav>
</header>
 
		  </a>
		</ul>
	  </nav>

<main class="content">

<main>
    <h1></h1>
    <h1 id="agent-base">agent-base</h1>
<h3 id="turn-a-function-into-an-httpagenthttpagent-instance">Turn a function into an <a href="https://nodejs.org/api/http.html#http_class_http_agent"><code>http.Agent</code></a> instance</h3>
<p>This module is a thin wrapper around the base <code>http.Agent</code> class.</p>
<p>It provides an abstract class that must define a <code>connect()</code> function,
which is responsible for creating the underlying socket that the HTTP
client requests will use.</p>
<p>The <code>connect()</code> function may return an arbitrary <code>Duplex</code> stream, or
another <code>http.Agent</code> instance to delegate the request to, and may be
asynchronous (by defining an <code>async</code> function).</p>
<p>Instances of this agent can be used with the <code>http</code> and <code>https</code>
modules. To differentiate, the options parameter in the <code>connect()</code>
function includes a <code>secureEndpoint</code> property, which can be checked
to determine what type of socket should be returned.</p>
<h4 id="some-subclasses">Some subclasses:</h4>
<p>Here are some more interesting uses of <code>agent-base</code>.
Send a pull request to list yours!</p>
<ul>
<li><a href="../http-proxy-agent"><code>http-proxy-agent</code></a>: An HTTP(s) proxy <code>http.Agent</code> implementation for HTTP endpoints</li>
<li><a href="../https-proxy-agent"><code>https-proxy-agent</code></a>: An HTTP(s) proxy <code>http.Agent</code> implementation for HTTPS endpoints</li>
<li><a href="../pac-proxy-agent"><code>pac-proxy-agent</code></a>: A PAC file proxy <code>http.Agent</code> implementation for HTTP and HTTPS</li>
<li><a href="../socks-proxy-agent"><code>socks-proxy-agent</code></a>: A SOCKS proxy <code>http.Agent</code> implementation for HTTP and HTTPS</li>
</ul>
<h2 id="example">Example</h2>
<p>Here&rsquo;s a minimal example that creates a new <code>net.Socket</code> or <code>tls.Socket</code>
based on the <code>secureEndpoint</code> property. This agent can be used with both
the <code>http</code> and <code>https</code> modules.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ts" data-lang="ts"><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">net</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;net&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">tls</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;tls&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">http</span> <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;http&#39;</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Agent</span> } <span style="color:#66d9ef">from</span> <span style="color:#e6db74">&#39;agent-base&#39;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyAgent</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Agent</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">opts</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// `secureEndpoint` is true when using the &#34;https&#34; module
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">opts</span>.<span style="color:#a6e22e">secureEndpoint</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">tls</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">opts</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#66d9ef">else</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">net</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">opts</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Keep alive enabled means that `connect()` will only be
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">// invoked when a new connection needs to be created
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">agent</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">MyAgent</span>({ <span style="color:#a6e22e">keepAlive</span>: <span style="color:#66d9ef">true</span> });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Pass the `agent` option when creating the HTTP request
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">http</span>.<span style="color:#66d9ef">get</span>(<span style="color:#e6db74">&#39;http://nodejs.org/api/&#39;</span>, { <span style="color:#a6e22e">agent</span> }, (<span style="color:#a6e22e">res</span>) <span style="color:#f92672">=&gt;</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;&#34;response&#34; event!&#39;</span>, <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">headers</span>);
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">pipe</span>(<span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">stdout</span>);
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div>
</main>

</main>
	
<footer>
	<p>&copy;2024 My New Hugo Site</p>
</footer>

</body>
</html>

